<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN" "http://struts.apache.org/dtds/struts-2.3.dtd">
	
<struts>
	<constant name="struts.enable.DynamicMethodInvocation" value="true" />
    <constant name="struts.custom.i18n.resources" value="config" />
    <constant name="struts.action.extension" value="act" />
    <constant name="struts.i18n.encoding" value="UTF-8" />
    <constant name="struts.devMode" value="true" />
    <constant name="struts.ui.theme" value="simple" />
    <constant name="struts.ognl.allowStaticMethodAccess" value="true"/>
    
    <include file="struts-user.xml"/>
	<include file="struts-admin.xml"/>
	<include file="struts-finance.xml"/>
	<include file="struts-loan.xml"/>
	<include file="struts-news.xml"/>
	<include file="struts-members.xml"/>
	<include file="struts-serviceInfo.xml"/>
	<include file="struts-club.xml"/>
	<include file="struts-json.xml"/>
	
	<package name="base" extends="struts-default">
		<interceptors>
			<interceptor name="admin" class="com.zj198.interceptor.AdminInterceptor"/>
			<interceptor name="user" class="com.zj198.interceptor.UserInterceptor"/>
			<interceptor name="check" class="com.zj198.interceptor.UserCheckInterceptor"/>
			<interceptor-stack name="adminInterceptor">
				<interceptor-ref name="defaultStack"/>
				<interceptor-ref name="admin"/>
			</interceptor-stack>
			<interceptor-stack name="userInterceptor">
				<interceptor-ref name="defaultStack"/>
				<interceptor-ref name="user"/>
			</interceptor-stack>
			<interceptor-stack name="checkInterceptor">
				<interceptor-ref name="defaultStack"/>
				<interceptor-ref name="user"/>
				<interceptor-ref name="check"/>
			</interceptor-stack>
		</interceptors>
		<global-results>
			<result name="noCheckPrompt">/WEB-INF/web/user/common/noCheckPrompt.jsp</result>
			<result name="login">/public/user/login.jsp</result>
			<result name="userCenter" type="redirect">/user/UserAction.act</result>
			<result name="activate">/public/user/activate.jsp</result>
			<result name="oldActivate">/WEB-INF/web/user/infoConfirm.jsp</result>
			<result name="chooseType">/WEB-INF/web/user/chooseType.jsp</result>
			<result name="error">/public/error.jsp</result>
			<result name="ajax">/public/ajax.jsp</result>
			<result name="building">/public/building.jsp</result>
			<result name="adminLogin">/WEB-INF/web/admin/login.jsp</result>
		</global-results>
		<!--global-exception-mappings>
			<exception-mapping result="error" exception="Exception"></exception-mapping>
		</global-exception-mappings--> 	 	
	</package>
	
	
    <package name="anonymous" namespace="/" extends="base">
    	<action name="Captcha" class="com.zj198.action.common.CaptchaAction">
    		<result type="stream">
				<param name="contentType">image/jpeg</param>   
				<param name="inputName">inputImage</param>
				<param name="bufferSize">1024</param>
			</result>
    	</action>
		<action name="Register" class="com.zj198.action.user.RegisterAction">
			<result name="register">/public/user/register.jsp</result>
			<result name="success" type="redirect">/Account.act</result>
		</action>
		<action name="Account" class="com.zj198.action.user.AccountAction">
			<result name="login">/public/user/login.jsp</result>
			<result name="activateResult">/public/user/activateResult.jsp</result>
			<result name="next" type="redirect">${rtnurl}</result>
		</action>
		<action name="EditReg" class="com.zj198.action.user.AccountAction" method="editRegInfo">
		</action>
		<action name="Index" class="com.zj198.action.common.IndexAction">
			<result name="success">/public/index.jsp</result>
		</action>
		<action name="DataCommon" class="com.zj198.action.common.CommonDataAction">
			<result name="provinceList">/public/common/provinceList.jsp</result>
			<result name="cityList">/public/common/cityList.jsp</result>
			<result name="districtList">/public/common/districtList.jsp</result>
			<result name="industry">/public/common/industry.jsp</result>
		</action>
		<action name="Recovery" class="com.zj198.action.user.RecoveryAction">
		    <result name="recoverPage">/public/user/retrievePwd/index.jsp</result>
		    <result name="sendSuccess">/public/user/retrievePwd/retrieveyResult.jsp</result>
		    <result name="resetPwd">/public/user/retrievePwd/retrieveyPwd.jsp</result>
		    <!-- <result name="success" type="redirect">/Account.act</result> -->
		</action>
	</package>
</struts>